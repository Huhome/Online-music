import{C as s,D as t,E as a,G as i,m as e,o as l,c as o,w as c,e as n,q as h,v as r,k as u,d,r as f,F as g,b as m,H as y,t as p,g as L,h as k,I as _,i as w,S as C,n as v,l as V}from"./index.7ed895d6.js";import{_ as H,m as x}from"./musichead.91a5aaa8.js";var $=H({data:()=>({flag:!1,suggestList:[],wordList:[],hotList:[],historyList:[],inputVal:"",HistoryList:[],searchflag:0}),onShow(){this.gethotList(),this.HistoryList=s("HistoryList")||[]},methods:{async gethotList(){const s=await this.$axios({url:"/search/hot/detail"});this.hotList=s.data},async getwordList(){const s=await this.$axios({url:`/search?keywords=${this.inputVal}`});this.wordList=s.result.songs},async getsuggestList(){const s=await this.$axios({url:`/search/suggest?keywords=${this.inputVal}`});this.suggestList=s.result.songs},confirmsearch(s){this.inputVal&&(s&&(this.inputVal=s),this.HistoryList.unshift(this.inputVal),this.HistoryList=[...new Set(this.HistoryList)],t("HistoryList",this.HistoryList),this.getsuggestList(this.inputVal),this.searchflag=2)},taphot(s){this.inputVal=s,this.flag=!0,this.confirmsearch()},ClearHistory(){a({title:"提示",content:"确定要清空所有历史记录吗?",success:s=>{s.confirm?(this.HistoryList=[],i("HistoryList")):s.cancel}})},inputsearch(){if(!this.inputVal.length)return this.flag=!1,void(this.searchflag=0);this.flag=!0,this.searchflag=1,this.getwordList()},tapOutsearch(){this.inputVal="",this.flag=!1,this.searchflag=0},navTap(s){this.$store.commit("SavesmiskList",this.suggestList),e({url:`/pages/dateil/dateil?id=${s}`})}},components:{musichead:x}},[["render",function(s,t,a,i,e,H){const x=L("musichead"),$=k,b=_,I=w,S=V,j=C;return l(),o(I,null,{default:c((()=>[n(I,{class:"seach"},{default:c((()=>[n(x,{title:"搜索",flag:!0,iconcolor:!0}),n(I,{class:"seach-seach"},{default:c((()=>[n($,{class:"iconfont iconsearch"}),n(b,{onConfirm:H.confirmsearch,onInput:H.inputsearch,type:"text",placeholder:"搜索歌曲",modelValue:e.inputVal,"onUpdate:modelValue":t[0]||(t[0]=s=>e.inputVal=s)},null,8,["onConfirm","onInput","modelValue"]),h(n($,{class:"iconfont iconguanbi",onClick:H.tapOutsearch},null,8,["onClick"]),[[r,e.flag]])])),_:1}),n(j,null,{default:c((()=>[0===e.searchflag?(l(),o(I,{key:0,class:"seach-cont"},{default:c((()=>[e.HistoryList.length?(l(),o(I,{key:0,class:"seach-history"},{default:c((()=>[n(I,{class:"history-head"},{default:c((()=>[n($,null,{default:c((()=>[u("历史记录")])),_:1}),n($,{class:"iconfont iconlajitong",onClick:H.ClearHistory},null,8,["onClick"])])),_:1}),n(I,{class:"history-list"},{default:c((()=>[(l(!0),d(g,null,f(e.HistoryList,((s,t)=>(l(),d(g,{key:t},[t<5?(l(),o(I,{key:0,onClick:t=>H.taphot(s)},{default:c((()=>[u(p(s),1)])),_:2},1032,["onClick"])):m("",!0)],64)))),128))])),_:1})])),_:1})):m("",!0),y("div",{class:"search-hot"},[y("div",{class:"hot-head"},"热搜榜"),(l(!0),d(g,null,f(e.hotList,((s,t)=>(l(),d("div",{class:"hot-item",key:t,onClick:t=>H.taphot(s.searchWord)},[y("div",{class:v(["hot-left",t<3?"active":""])},p(t+1),3),y("div",{class:"hot-word"},[n(I,{class:"word-top white"},{default:c((()=>[u(p(s.searchWord)+" ",1),s.iconUrl?(l(),o(S,{key:0,src:s.iconUrl,mode:"heightFix"},null,8,["src"])):m("",!0)])),_:2},1024),n(I,{class:"word-bottom white"},{default:c((()=>[u(p(s.content),1)])),_:2},1024)]),n($,{class:"hot-count"},{default:c((()=>[u(p(s.score),1)])),_:2},1024)],8,["onClick"])))),128))])])),_:1})):m("",!0),1===e.searchflag?(l(),d("div",{key:1,class:"search-suggest"},[y("div",{class:"suggest-head"},"搜索“"+p(e.inputVal)+"”",1),(l(!0),d(g,null,f(e.wordList,(s=>(l(),d("div",{class:"suggest-item",key:s.id,onClick:t=>H.confirmsearch(s.name)},[n($,{class:"iconfont iconsearch"}),u(p(s.name),1)],8,["onClick"])))),128))])):m("",!0),2===e.searchflag?(l(),o(I,{key:2,class:"search-result"},{default:c((()=>[(l(!0),d(g,null,f(e.suggestList,((s,t)=>(l(),o(I,{onClick:t=>H.navTap(s.id),class:"result-item",key:t},{default:c((()=>[n(I,{class:"result-word"},{default:c((()=>[n(I,null,{default:c((()=>[u(p(s.name),1)])),_:2},1024),s.artists?(l(),o(I,{key:0},{default:c((()=>[u(p(s.artists[0].name)+" - "+p(s.album.name),1)])),_:2},1024)):m("",!0)])),_:2},1024),n($,{class:"iconfont iconbofang"})])),_:2},1032,["onClick"])))),128))])),_:1})):m("",!0)])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-5f07616e"]]);export{$ as default};
